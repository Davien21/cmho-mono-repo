{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "RAILPACK",
    "buildCommand": "sh -c 'ROOT=$(pwd); while [ ! -f \"$ROOT/pnpm-workspace.yaml\" ] && [ \"$ROOT\" != \"/\" ]; do ROOT=$(dirname \"$ROOT\"); done; cd \"$ROOT\" && pnpm install --frozen-lockfile'",
    "useMetalBuildEnvironment": true
  },
  "deploy": {
    "startCommand": "sh -c 'ROOT=$(pwd); while [ ! -f \"$ROOT/pnpm-workspace.yaml\" ] && [ \"$ROOT\" != \"/\" ]; do ROOT=$(dirname \"$ROOT\"); done; cd \"$ROOT\" && pnpm --filter @cmho/backend start'"
  }
}
